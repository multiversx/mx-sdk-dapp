import{c as rn,d as sn}from"./chunk-QAZMQ2BI.js";import{a as H}from"./chunk-KVR366XS.js";import{a as E}from"./chunk-AJRKIJ6W.js";import{a as w}from"./chunk-ZXZXEDS2.js";import{x as an}from"./chunk-UDZUNVED.js";import{a as u,b as v,i as on,j as L,m as G}from"./chunk-HBP5N4FR.js";G();an();import t,{useEffect as cn,useState as x}from"react";import{faArrowLeft as dn,faTimes as un}from"@fortawesome/free-solid-svg-icons";import{FontAwesomeIcon as F}from"@fortawesome/react-fontawesome";import a from"classnames";var pn=C=>{var I;let{allTransactions:r,className:M,currentStep:e,currentTransaction:i,GuardianScreen:s,error:W,globalStyles:p,handleClose:$,handleSubmit:b,isLastTransaction:A,onPrev:O,onSignTransaction:j,signStepInnerClasses:N,styles:n,title:V,waitingForDevice:m}=C,[g,h]=x(!1),[S,_]=x({});if(!i)return null;let c=`${i.transaction.getNonce().valueOf().toString()}_${i.transactionTokenInfo.multiTxData}_${i.transactionIndex}`;cn(()=>{let T=Object.keys(S).includes(c),tn=Object.values(S).includes(e);T||tn||_(en=>v(u({},en),{[c]:e}))},[c,e]);let q=i.transaction.getData().toString(),{buttonsWrapperClassName:z,buttonClassName:B}=N||{},{type:J,multiTxData:P}=i.transactionTokenInfo,K=e===0,k=T=>{T.preventDefault(),K?$():O()},l=A&&!m,Q=()=>L(void 0,null,function*(){if(yield j(),l&&s)return h(!0);l&&b&&b()}),U=J&&P&&!q.endsWith(P),o="Sign & Continue";o=m?"Check your Ledger":o,o=l?"Sign & Submit":o,o=U?"Continue":o;let d={currentTransaction:i,error:W,allTransactions:r,currentStep:e,isGuarded:Boolean(s),signStepInnerClasses:N},y=()=>{h(!1)},X=r.length>1?"Sign Transactions":"Sign Transaction",Y=r.length>1?"Confirm Transactions":"Confirm Transaction",Z=r.length>1?`Signing Transaction ${e+1} of ${r.length}`:V||"Sign Transaction",f=s&&g,R=f?"Verify Guardian":Z,nn=[{title:X,active:!g},{title:Y,active:g,hidden:!d.isGuarded}],D=S[c]===e;return t.createElement("div",{className:a(n==null?void 0:n.modalLayoutContent,n==null?void 0:n.spaced,M,{[(I=n==null?void 0:n.guarded)!=null?I:""]:d.isGuarded})},f&&t.createElement("div",{onClick:y,className:a(n==null?void 0:n.modalLayoutHeadingIcon,n==null?void 0:n.back)},t.createElement(F,{icon:dn})),t.createElement("div",{onClick:k,className:a(n==null?void 0:n.modalLayoutHeadingIcon,n==null?void 0:n.close)},t.createElement(F,{icon:un})),d.isGuarded&&t.createElement(H,{steps:nn,type:"detailed",size:"small"}),t.createElement("div",{className:n==null?void 0:n.title,"data-testid":"signStepTitle"},R||"Confirm on Ledger"),f?t.createElement(s,v(u({},C),{onPrev:y,guardianFormDescription:"Enter the code from your Authenticator app to verify this transaction."})):t.createElement(t.Fragment,null,t.createElement(E,u({},d)),t.createElement("div",{className:a(n==null?void 0:n.signButtons,z)},t.createElement("button",{id:"closeButton","data-testid":"closeButton",onClick:k,className:a(n==null?void 0:n.signButtonCancel,B)},e===0?"Cancel":"Back"),t.createElement("button",{type:"button",className:a(p==null?void 0:p.btnPrimary,n==null?void 0:n.signButtonSubmit,B),id:"signBtn","data-testid":"signBtn",onClick:Q,disabled:m||!D},D?o:"Loading..."))))},wn=w(pn,{ssrStyles:()=>import("../UI/SignTransactionsModals/SignWithDeviceModal/signWithDeviceModalStyles.js"),clientStyles:()=>(sn(),on(rn)).default});export{wn as a};
//# sourceMappingURL=chunk-LCRJOQJJ.js.map
