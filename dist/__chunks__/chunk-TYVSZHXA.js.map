{
  "version": 3,
  "sources": ["../../src/utils/account/refreshAccount.tsx"],
  "sourcesContent": ["import { getAccountProvider } from 'providers';\nimport { setAccount } from 'reduxStore/slices';\nimport { store } from 'reduxStore/store';\nimport { getAccount } from './getAccount';\nimport { getAddress } from './getAddress';\nimport { getLatestNonce } from './getLatestNonce';\n\nconst setNewAccount = async () => {\n  try {\n    const address = await getAddress();\n\n    try {\n      const account = await getAccount(address);\n\n      if (account != null) {\n        const accountData = {\n          ...account,\n          nonce: getLatestNonce(account)\n        };\n\n        store.dispatch(setAccount(accountData));\n\n        return accountData;\n      }\n    } catch (e) {\n      console.error('Failed getting account ', e);\n    }\n  } catch (e) {\n    console.error('Failed getting address ', e);\n  }\n\n  return null;\n};\n\nexport async function refreshAccount() {\n  const provider = getAccountProvider();\n\n  if (provider == null) {\n    throw 'Provider not initialized';\n  }\n\n  if (!provider.isInitialized || provider.isInitialized()) {\n    return setNewAccount();\n  }\n\n  try {\n    if (!provider.init) {\n      throw 'Current provider does not have init() function';\n    }\n\n    const initialized = await provider.init();\n\n    if (!initialized) {\n      return;\n    }\n\n    return setNewAccount();\n  } catch (e) {\n    console.error('Failed initializing provider ', e);\n  }\n\n  return undefined;\n}\n"],
  "mappings": "qWAAA,IACA,IACA,IACA,IAEA,IAEA,GAAM,GAAgB,IAAY,0BAChC,GAAI,CACF,GAAM,GAAU,KAAM,GAAW,EAEjC,GAAI,CACF,GAAM,GAAU,KAAM,GAAW,CAAO,EAExC,GAAI,GAAW,KAAM,CACnB,GAAM,GAAc,OACf,GADe,CAElB,MAAO,EAAe,CAAO,CAC/B,GAEA,SAAM,SAAS,EAAW,CAAW,CAAC,EAE/B,CACT,CACF,OAAS,EAAP,CACA,QAAQ,MAAM,0BAA2B,CAAC,CAC5C,CACF,OAAS,EAAP,CACA,QAAQ,MAAM,0BAA2B,CAAC,CAC5C,CAEA,MAAO,KACT,GAEA,YAAuC,gCACrC,GAAM,GAAW,EAAmB,EAEpC,GAAI,GAAY,KACd,KAAM,2BAGR,GAAI,CAAC,EAAS,eAAiB,EAAS,cAAc,EACpD,MAAO,GAAc,EAGvB,GAAI,CACF,GAAI,CAAC,EAAS,KACZ,KAAM,iDAKR,MAFoB,MAAM,GAAS,KAAK,GAMjC,EAAc,EAHnB,MAIJ,OAAS,EAAP,CACA,QAAQ,MAAM,gCAAiC,CAAC,CAClD,CAGF",
  "names": []
}
