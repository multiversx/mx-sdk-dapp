{
  "version": 3,
  "sources": ["../../src/hooks/transactions/useTransactionsTracker.ts"],
  "sourcesContent": ["import { useEffect, useRef } from 'react';\nimport { getTransactionsByHashes as defaultGetTxByHash } from 'apiCalls/transactions';\nimport { TransactionsTrackerType } from 'types/transactionsTracker.types';\nimport { useRegisterWebsocketListener } from '../websocketListener';\nimport {\n  websocketConnection,\n  WebsocketConnectionStatusEnum\n} from '../websocketListener/websocketConnection';\nimport { useCheckTransactionStatus } from './useCheckTransactionStatus';\nimport { useGetPollingInterval } from './useGetPollingInterval';\n\nexport function useTransactionsTracker(props?: TransactionsTrackerType) {\n  const checkTransactionStatus = useCheckTransactionStatus();\n  const pollingInterval = useGetPollingInterval();\n  const pollingIntervalTimer = useRef<NodeJS.Timeout | null>(null);\n  const isWebsocketCompleted =\n    websocketConnection.status === WebsocketConnectionStatusEnum.COMPLETED;\n\n  const getTransactionsByHash =\n    props?.getTransactionsByHash ?? defaultGetTxByHash;\n\n  const onMessage = () => {\n    checkTransactionStatus({\n      getTransactionsByHash,\n      ...props\n    });\n  };\n\n  useRegisterWebsocketListener(onMessage);\n\n  useEffect(() => {\n    if (isWebsocketCompleted) {\n      // Do not setInterval if we already subscribe to websocket event\n      if (pollingIntervalTimer.current) {\n        clearInterval(pollingIntervalTimer.current);\n      }\n\n      return;\n    }\n\n    if (pollingIntervalTimer.current) {\n      return;\n    }\n\n    pollingIntervalTimer.current = setInterval(onMessage, pollingInterval);\n\n    return () => {\n      if (pollingIntervalTimer.current) {\n        clearInterval(pollingIntervalTimer.current);\n      }\n    };\n  }, [onMessage, websocketConnection]);\n}\n"],
  "mappings": "uPAAA,kDAWO,WAAgC,EAAiC,CAXxE,MAYE,GAAM,GAAyB,EAA0B,EACnD,EAAkB,EAAsB,EACxC,EAAuB,EAA8B,IAAI,EACzD,EACJ,EAAoB,SAAW,YAE3B,EACJ,oBAAO,wBAAP,OAAgC,EAE5B,EAAY,IAAM,CACtB,EAAuB,GACrB,yBACG,EACJ,CACH,EAEA,EAA6B,CAAS,EAEtC,EAAU,IAAM,CACd,GAAI,EAAsB,CAExB,AAAI,EAAqB,SACvB,cAAc,EAAqB,OAAO,EAG5C,MACF,CAEA,GAAI,GAAqB,QAIzB,SAAqB,QAAU,YAAY,EAAW,CAAe,EAE9D,IAAM,CACX,AAAI,EAAqB,SACvB,cAAc,EAAqB,OAAO,CAE9C,CACF,EAAG,CAAC,EAAW,CAAmB,CAAC,CACrC",
  "names": []
}
