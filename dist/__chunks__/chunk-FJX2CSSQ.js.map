{
  "version": 3,
  "sources": ["../../src/wrappers/AxiosInterceptorContext/components/AxiosInterceptor.tsx"],
  "sourcesContent": ["import React, { useRef, PropsWithChildren, useMemo } from 'react';\nimport axios from 'axios';\nimport { useAxiosInterceptorContext } from './AxiosInterceptorContextProvider';\n\nexport interface AxiosInterceptorType extends PropsWithChildren {\n  authenticatedDomains: string[];\n}\n\nexport const AxiosInterceptor = ({\n  children,\n  authenticatedDomains\n}: AxiosInterceptorType) => {\n  const { loginInfo } = useAxiosInterceptorContext();\n  const bearerToken = loginInfo?.tokenLogin?.nativeAuthToken;\n\n  const requestIdRef = useRef(-1);\n\n  requestIdRef.current = useMemo(() => {\n    axios.interceptors.response.use(\n      (response) => {\n        return response;\n      },\n      (error) => {\n        let url = error.config?.url;\n        if (error.config?.params) {\n          const queryString = new URLSearchParams(error.config.params);\n          url += `?${queryString.toString()}`;\n        }\n        console.error('Axios error for: ', url);\n        return Promise.reject(error);\n      }\n    );\n\n    axios.interceptors.request.eject(requestIdRef.current);\n\n    return axios.interceptors.request.use(\n      async (config) => {\n        if (\n          authenticatedDomains.includes(String(config?.baseURL)) &&\n          bearerToken\n        ) {\n          config.headers.Authorization = `Bearer ${bearerToken}`;\n        }\n\n        return config;\n      },\n      (error) => {\n        Promise.reject(error);\n      }\n    );\n  }, [bearerToken, authenticatedDomains]);\n\n  return <>{children}</>;\n};\n"],
  "mappings": "kFAAA,mDACA,qBAOO,GAAM,GAAmB,CAAC,CAC/B,WACA,0BAC0B,CAX5B,MAYE,GAAM,CAAE,aAAc,EAA2B,EAC3C,EAAc,oBAAW,aAAX,cAAuB,gBAErC,EAAe,EAAO,EAAE,EAE9B,SAAa,QAAU,EAAQ,IAC7B,GAAM,aAAa,SAAS,IAC1B,AAAC,GACQ,EAET,AAAC,GAAU,CAtBjB,QAuBQ,GAAI,GAAM,KAAM,SAAN,cAAc,IACxB,MAAI,KAAM,SAAN,QAAc,QAEhB,IAAO,IAAI,AADS,GAAI,iBAAgB,EAAM,OAAO,MAAM,EACpC,SAAS,KAElC,QAAQ,MAAM,oBAAqB,CAAG,EAC/B,QAAQ,OAAO,CAAK,CAC7B,CACF,EAEA,EAAM,aAAa,QAAQ,MAAM,EAAa,OAAO,EAE9C,EAAM,aAAa,QAAQ,IAChC,AAAO,GAAW,0BAChB,MACE,GAAqB,SAAS,OAAO,iBAAQ,OAAO,CAAC,GACrD,GAEA,GAAO,QAAQ,cAAgB,UAAU,KAGpC,CACT,GACA,AAAC,GAAU,CACT,QAAQ,OAAO,CAAK,CACtB,CACF,GACC,CAAC,EAAa,CAAoB,CAAC,EAE/B,gCAAG,CAAS,CACrB",
  "names": []
}
