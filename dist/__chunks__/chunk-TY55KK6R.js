import{a as Ht,b as zt}from"./chunk-TJD2PXIU.js";import{a as Ge}from"./chunk-7Y46Y4T5.js";import{a as oe}from"./chunk-SBMZAOYK.js";import{a as Ne}from"./chunk-JD6VHNYX.js";import{a as De}from"./chunk-XGOEYHJZ.js";import{a as Me}from"./chunk-QTX2IPLO.js";import{a as Oe}from"./chunk-I2YCVINV.js";import{a as Re}from"./chunk-I7APG7OA.js";import{a as Wt}from"./chunk-35YX2WD6.js";import{a as ye}from"./chunk-ZV7QWZXL.js";import{a as Ae}from"./chunk-AFHIR5VN.js";import{b as be}from"./chunk-KQPPULAV.js";import{c as Ee,d as se}from"./chunk-JUB6TCFX.js";import{a as ae}from"./chunk-PVNL3U3S.js";import{a as ie}from"./chunk-COTRMAUW.js";import{a as Pe}from"./chunk-U6HTR5RX.js";import{k as we,s as Gt}from"./chunk-7OZRG2YY.js";import{a as ne,b as Rt}from"./chunk-MSMZZ5MP.js";import{a as Te,b as Mt}from"./chunk-25CD2LSG.js";import{l as Ie}from"./chunk-S55DZJQR.js";import{a as Dt}from"./chunk-NJJDLNA3.js";import{h as Se}from"./chunk-EVQFZNK2.js";import{e as Ce,j as qe,k as Y}from"./chunk-LRON2GMF.js";import{a as xe,c as Ot}from"./chunk-UORIA4VW.js";import{m as me,x as At}from"./chunk-UDZUNVED.js";import{a as ge,c as z,d as ve,e as ee,f as _e,i as re}from"./chunk-7YHU2LQD.js";import{a as te,b as Nt}from"./chunk-OWBHRN3S.js";import{p as bt}from"./chunk-EOZJRV5E.js";import{a as J,d as yt}from"./chunk-2SDQY5CF.js";import{f as s,h as Et,j as Q,m as r}from"./chunk-HBP5N4FR.js";var He=s((ra,We)=>{r();var Ft=ie(),Ut=Ft["__core-js_shared__"];We.exports=Ut});var Ue=s((ta,Fe)=>{r();var ce=He(),ze=function(){var e=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Lt(e){return!!ze&&ze in e}Fe.exports=Lt});var ke=s((na,Le)=>{r();var kt=Function.prototype,Vt=kt.toString;function jt(e){if(e!=null){try{return Vt.call(e)}catch(t){}try{return e+""}catch(t){}}return""}Le.exports=jt});var je=s((sa,Ve)=>{r();var $t=Ht(),Kt=Ue(),Jt=Wt(),Yt=ke(),Zt=/[\\^$.*+?()[\]{}|]/g,Bt=/^\[object .+?Constructor\]$/,Xt=Function.prototype,Qt=Object.prototype,en=Xt.toString,rn=Qt.hasOwnProperty,tn=RegExp("^"+en.call(rn).replace(Zt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nn(e){if(!Jt(e)||Kt(e))return!1;var t=$t(e)?tn:Bt;return t.test(Yt(e))}Ve.exports=nn});var Ke=s((aa,$e)=>{r();function sn(e,t){return e==null?void 0:e[t]}$e.exports=sn});var Z=s((ia,Je)=>{r();var an=je(),on=Ke();function cn(e,t){var n=on(e,t);return an(n)?n:void 0}Je.exports=cn});var F=s((oa,Ye)=>{r();var un=Z(),ln=un(Object,"create");Ye.exports=ln});var Xe=s((ca,Be)=>{r();var Ze=F();function hn(){this.__data__=Ze?Ze(null):{},this.size=0}Be.exports=hn});var er=s((ua,Qe)=>{r();function pn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}Qe.exports=pn});var tr=s((la,rr)=>{r();var dn=F(),fn="__lodash_hash_undefined__",gn=Object.prototype,vn=gn.hasOwnProperty;function _n(e){var t=this.__data__;if(dn){var n=t[e];return n===fn?void 0:n}return vn.call(t,e)?t[e]:void 0}rr.exports=_n});var sr=s((ha,nr)=>{r();var mn=F(),xn=Object.prototype,Sn=xn.hasOwnProperty;function Cn(e){var t=this.__data__;return mn?t[e]!==void 0:Sn.call(t,e)}nr.exports=Cn});var ir=s((pa,ar)=>{r();var qn=F(),In="__lodash_hash_undefined__";function Tn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=qn&&t===void 0?In:t,this}ar.exports=Tn});var cr=s((da,or)=>{r();var wn=Xe(),Pn=er(),En=tr(),yn=sr(),bn=ir();function O(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var c=e[t];this.set(c[0],c[1])}}O.prototype.clear=wn;O.prototype.delete=Pn;O.prototype.get=En;O.prototype.has=yn;O.prototype.set=bn;or.exports=O});var lr=s((fa,ur)=>{r();function An(){this.__data__=[],this.size=0}ur.exports=An});var U=s((ga,hr)=>{r();var Nn=zt();function On(e,t){for(var n=e.length;n--;)if(Nn(e[n][0],t))return n;return-1}hr.exports=On});var dr=s((va,pr)=>{r();var Dn=U(),Mn=Array.prototype,Rn=Mn.splice;function Gn(e){var t=this.__data__,n=Dn(t,e);if(n<0)return!1;var c=t.length-1;return n==c?t.pop():Rn.call(t,n,1),--this.size,!0}pr.exports=Gn});var gr=s((_a,fr)=>{r();var Wn=U();function Hn(e){var t=this.__data__,n=Wn(t,e);return n<0?void 0:t[n][1]}fr.exports=Hn});var _r=s((ma,vr)=>{r();var zn=U();function Fn(e){return zn(this.__data__,e)>-1}vr.exports=Fn});var xr=s((xa,mr)=>{r();var Un=U();function Ln(e,t){var n=this.__data__,c=Un(n,e);return c<0?(++this.size,n.push([e,t])):n[c][1]=t,this}mr.exports=Ln});var Cr=s((Sa,Sr)=>{r();var kn=lr(),Vn=dr(),jn=gr(),$n=_r(),Kn=xr();function D(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var c=e[t];this.set(c[0],c[1])}}D.prototype.clear=kn;D.prototype.delete=Vn;D.prototype.get=jn;D.prototype.has=$n;D.prototype.set=Kn;Sr.exports=D});var Ir=s((Ca,qr)=>{r();var Jn=Z(),Yn=ie(),Zn=Jn(Yn,"Map");qr.exports=Zn});var Pr=s((qa,wr)=>{r();var Tr=cr(),Bn=Cr(),Xn=Ir();function Qn(){this.size=0,this.__data__={hash:new Tr,map:new(Xn||Bn),string:new Tr}}wr.exports=Qn});var yr=s((Ia,Er)=>{r();function es(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}Er.exports=es});var L=s((Ta,br)=>{r();var rs=yr();function ts(e,t){var n=e.__data__;return rs(t)?n[typeof t=="string"?"string":"hash"]:n.map}br.exports=ts});var Nr=s((wa,Ar)=>{r();var ns=L();function ss(e){var t=ns(this,e).delete(e);return this.size-=t?1:0,t}Ar.exports=ss});var Dr=s((Pa,Or)=>{r();var as=L();function is(e){return as(this,e).get(e)}Or.exports=is});var Rr=s((Ea,Mr)=>{r();var os=L();function cs(e){return os(this,e).has(e)}Mr.exports=cs});var Wr=s((ya,Gr)=>{r();var us=L();function ls(e,t){var n=us(this,e),c=n.size;return n.set(e,t),this.size+=n.size==c?0:1,this}Gr.exports=ls});var zr=s((ba,Hr)=>{r();var hs=Pr(),ps=Nr(),ds=Dr(),fs=Rr(),gs=Wr();function M(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var c=e[t];this.set(c[0],c[1])}}M.prototype.clear=hs;M.prototype.delete=ps;M.prototype.get=ds;M.prototype.has=fs;M.prototype.set=gs;Hr.exports=M});var Ur=s((Aa,Fr)=>{r();var vs="__lodash_hash_undefined__";function _s(e){return this.__data__.set(e,vs),this}Fr.exports=_s});var kr=s((Na,Lr)=>{r();function ms(e){return this.__data__.has(e)}Lr.exports=ms});var jr=s((Oa,Vr)=>{r();var xs=zr(),Ss=Ur(),Cs=kr();function B(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new xs;++t<n;)this.add(e[t])}B.prototype.add=B.prototype.push=Ss;B.prototype.has=Cs;Vr.exports=B});var Kr=s((Da,$r)=>{r();function qs(e,t,n,c){for(var v=e.length,p=n+(c?1:-1);c?p--:++p<v;)if(t(e[p],p,e))return p;return-1}$r.exports=qs});var Yr=s((Ma,Jr)=>{r();function Is(e){return e!==e}Jr.exports=Is});var Br=s((Ra,Zr)=>{r();function Ts(e,t,n){for(var c=n-1,v=e.length;++c<v;)if(e[c]===t)return c;return-1}Zr.exports=Ts});var Qr=s((Ga,Xr)=>{r();var ws=Kr(),Ps=Yr(),Es=Br();function ys(e,t,n){return t===t?Es(e,t,n):ws(e,Ps,n)}Xr.exports=ys});var rt=s((Wa,et)=>{r();var bs=Qr();function As(e,t){var n=e==null?0:e.length;return!!n&&bs(e,t,0)>-1}et.exports=As});var nt=s((Ha,tt)=>{r();function Ns(e,t,n){for(var c=-1,v=e==null?0:e.length;++c<v;)if(n(t,e[c]))return!0;return!1}tt.exports=Ns});var at=s((za,st)=>{r();function Os(e,t){return e.has(t)}st.exports=Os});var ot=s((Fa,it)=>{r();var Ds=Z(),Ms=ie(),Rs=Ds(Ms,"Set");it.exports=Rs});var ut=s((Ua,ct)=>{r();function Gs(){}ct.exports=Gs});var ue=s((La,lt)=>{r();function Ws(e){var t=-1,n=Array(e.size);return e.forEach(function(c){n[++t]=c}),n}lt.exports=Ws});var pt=s((ka,ht)=>{r();var le=ot(),Hs=ut(),zs=ue(),Fs=1/0,Us=le&&1/zs(new le([,-0]))[1]==Fs?function(e){return new le(e)}:Hs;ht.exports=Us});var ft=s((Va,dt)=>{r();var Ls=jr(),ks=rt(),Vs=nt(),js=at(),$s=pt(),Ks=ue(),Js=200;function Ys(e,t,n){var c=-1,v=ks,p=e.length,R=!0,q=[],_=q;if(n)R=!1,v=Vs;else if(p>=Js){var k=t?null:$s(e);if(k)return Ks(k);R=!1,v=js,_=new Ls}else _=t?[]:q;e:for(;++c<p;){var u=e[c],T=t?t(u):u;if(u=n||u!==0?u:0,R&&T===T){for(var V=_.length;V--;)if(_[V]===T)continue e;t&&_.push(T),q.push(u)}else v(_,T,n)||(_!==q&&_.push(T),q.push(u))}return q}dt.exports=Ys});var vt=s((ja,gt)=>{r();var Zs=ft();function Bs(e){return e&&e.length?Zs(e):[]}gt.exports=Bs});r();var Ct=Et(vt());import{useEffect as Xs,useRef as _t}from"react";import{TransactionOptions as Qs,TransactionVersion as ea}from"@multiversx/sdk-core";import{ExtensionProvider as mt}from"@multiversx/sdk-extension-provider";import{MetamaskProvider as xt}from"@multiversx/sdk-metamask-provider/out/metamaskProvider";import{PasskeyProvider as St}from"@multiversx/sdk-passkey-provider/out";At();yt();Gt();Dt();bt();Mt();Rt();Ot();Nt();var Si=()=>{let e=Ee(),t=_t("/"),{provider:n}=Ae(),c=se(Ie),v=be(n),p=_t(!1),R=Me(),{isGuarded:q,address:_}=ye(),k=se(we),{transactionsToSign:u,error:T,setError:V,hasTransactions:X,onAbort:he,clearTransactionStatusMessage:pe}=Ge();Ne(he);let j=(0,Ct.default)(u==null?void 0:u.transactions.map(l=>l.getSender().toString()).filter(l=>l)),G=j==null?void 0:j[0],{data:de}=Pe(!G||G===_?null:G),qt=l=>{var w,y,I,b,A,W,E,h,x,H,N,K;let f=n instanceof mt,m=n instanceof St,g=n instanceof J,d=n instanceof ae,S=n instanceof xt,C=n instanceof oe;e(Ce()),e(Se(l)),p.current=!1,!(!f&&!g&&!d&&!m&&!S)&&(pe(),f&&((y=(w=mt.getInstance())==null?void 0:w.cancelAction)==null||y.call(w)),m&&((b=(I=St.getInstance())==null?void 0:I.cancelAction)==null||b.call(I)),S&&((W=(A=xt.getInstance())==null?void 0:A.cancelAction)==null||W.call(A)),g&&((h=(E=J.getInstance())==null?void 0:E.cancelAction)==null||h.call(E)),d&&((H=(x=ae.getInstance())==null?void 0:x.cancelAction)==null||H.call(x)),C&&((K=(N=oe.getInstance())==null?void 0:N.cancelAction)==null||K.call(N)))},$=(l,f)=>{v==="walletconnectv2"&&(l=z);let g=l.includes(z);if(qt(f),g){e(qe(z));return}V(l)},It=(l,f,m="")=>{let g={[me]:f},d=m;if(window!=null&&window.location){let{search:C,origin:w}=te(),y=new URLSearchParams(C);d=`${w}${m}`,y.forEach((I,b)=>{g[b]=I})}let S=Te({callbackUrl:d,urlParams:g});n.signTransactions(l,{callbackUrl:encodeURIComponent(S)})},Tt=()=>Q(void 0,null,function*(){var W,E;if(p.current||!u)return;let{sessionId:l,transactions:f,callbackRoute:m,customTransactionInformation:g}=u,{redirectAfterSign:d}=g,S=xe(),C=m||S,w=S.includes(C),y=d&&!w;try{if(!(yield(W=n==null?void 0:n.init)==null?void 0:W.call(n)))return}catch(h){let x=(h==null?void 0:h.message)||h||ee;console.error(x),$(ee,l);return}let I=!g.skipGuardian,b=g.hasConsentPopup,A=n instanceof J;try{p.current=!0,A&&b&&n.setShouldShowConsentPopup(!0);let h=(E=yield n.signTransactions(q&&I?f==null?void 0:f.map(P=>(P.setVersion(ea.withTxOptions()),P.setOptions(Qs.withOptions({guarded:!0})),P)):f))!=null?E:[];if(p.current=!1,!De(h))return;let H=Object.values(h).map(P=>ne(P)),{needs2FaSigning:N,guardTransactions:K}=Re({transactions:h,sessionId:l,callbackRoute:m,isGuarded:q&&I,walletAddress:c});if(N){let P=yield K();H=P?P.map(Pt=>ne(Pt)):[]}let fe={sessionId:l,transactions:H,status:"signed"};y&&(fe.redirectRoute=C),e(Y(fe))}catch(h){p.current=!1;let x=(h==null?void 0:h.message)||h||ve;console.error(x),e(Y({sessionId:l,status:"cancelled"})),$(x.includes("cancel")?z:x,l)}}),wt=()=>Q(void 0,null,function*(){if(!u)return;pe();let{sessionId:l,transactions:f,callbackRoute:m,customTransactionInformation:g}=u;if(!n){console.error(_e);return}if(j.length>1)throw new Error("Multiple senders are not allowed");if(G&&G!==_&&!Oe(de,_))return console.error(re),$(re);t.current=m||te().pathname;try{let d=v==="wallet",S=g.skipUpdateNonces?f:yield R(f);if(d)return It(S,l,m);Tt()}catch(d){let C=(d==null?void 0:d.message)||ge;console.error(C),$(C,l),e(Y({sessionId:l,status:"cancelled"})),console.error(C,d)}});return Xs(()=>{X?wt():p.current=!1},[u,X,de]),{error:T,canceledTransactionsMessage:k,onAbort:he,hasTransactions:X,callbackRoute:t.current,sessionId:u==null?void 0:u.sessionId,transactions:u==null?void 0:u.transactions}};export{Si as a};
//# sourceMappingURL=chunk-TY55KK6R.js.map
