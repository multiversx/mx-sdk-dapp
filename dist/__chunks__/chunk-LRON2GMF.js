import{a as C,c as R}from"./chunk-7RBRFERR.js";import{k as E,l as x,m as M,x as U}from"./chunk-HNDDVE4V.js";import{p as O}from"./chunk-EOZJRV5E.js";import{a as i,b as P,e as B,m as A}from"./chunk-HBP5N4FR.js";import{createSlice as D}from"@reduxjs/toolkit";import{REHYDRATE as w}from"redux-persist";var S,N,v,V,X,Z,_,$,nn,sn,an,on,tn,rn,en,b=B(()=>{A();O();U();R();S={signedTransactions:{},transactionsToSign:null,signTransactionsError:null,signTransactionsCancelMessage:null,customTransactionInformationForSessionId:{}},N={signWithoutSending:!1,sessionInformation:null,redirectAfterSign:!1},v=D({name:"transactionsSlice",initialState:S,reducers:{moveTransactionsToSignedState:(n,a)=>{var d,l;let{sessionId:s,transactions:o,errorMessage:t,status:c,redirectRoute:r,customTransactionInformation:T}=a.payload;n.customTransactionInformationForSessionId[s]=i(i(i({},N),((d=n.signedTransactions[s])==null?void 0:d.customTransactionInformation)||{}),n.customTransactionInformationForSessionId[s]||{}),n.signedTransactions[s]={transactions:o,status:c,errorMessage:t,redirectRoute:r,customTransactionInformation:i(i({},n.customTransactionInformationForSessionId[s]),T!=null?T:{})},((l=n==null?void 0:n.transactionsToSign)==null?void 0:l.sessionId)===s&&(n.transactionsToSign=S.transactionsToSign)},clearSignedTransaction:(n,a)=>{n.signedTransactions[a.payload]&&delete n.signedTransactions[a.payload]},clearTransactionToSign:n=>{n!=null&&n.transactionsToSign&&(n.transactionsToSign=null)},updateSignedTransaction:(n,a)=>{n.signedTransactions=i(i({},n.signedTransactions),a.payload)},updateSignedTransactions:(n,a)=>{let{sessionId:s,status:o,errorMessage:t,transactions:c}=a.payload;n.signedTransactions[s]!=null&&(n.signedTransactions[s].status=o,t!=null&&(n.signedTransactions[s].errorMessage=t),c!=null&&(n.signedTransactions[s].transactions=c))},updateSignedTransactionStatus:(n,a)=>{var l,u,g,m,p,y,f,I;let{sessionId:s,status:o,errorMessage:t,transactionHash:c,serverTransaction:r,inTransit:T}=a.payload,d=(u=(l=n.signedTransactions)==null?void 0:l[s])==null?void 0:u.transactions;if(d!=null){n.signedTransactions[s].transactions=d.map(e=>e.hash===c?P(i(i({},r!=null?r:{}),e),{status:o,errorMessage:t,inTransit:T}):e);let F=(m=(g=n.signedTransactions[s])==null?void 0:g.transactions)==null?void 0:m.every(e=>E(e.status)),h=(y=(p=n.signedTransactions[s])==null?void 0:p.transactions)==null?void 0:y.some(e=>x(e.status)),H=(I=(f=n.signedTransactions[s])==null?void 0:f.transactions)==null?void 0:I.every(e=>M(e.status));F&&(n.signedTransactions[s].status="success"),h&&(n.signedTransactions[s].status="fail"),H&&(n.signedTransactions[s].status="invalid")}},setTransactionsToSign:(n,a)=>{n.transactionsToSign=a.payload;let{sessionId:s,customTransactionInformation:o}=a.payload;n.customTransactionInformationForSessionId[s]=o,n.signTransactionsError=null},clearAllTransactionsToSign:n=>{n.transactionsToSign=S.transactionsToSign,n.signTransactionsError=null},clearAllSignedTransactions:n=>{n.signedTransactions=S.signedTransactions},setSignTransactionsError:(n,a)=>{n.signTransactionsError=a.payload},setSignTransactionsCancelMessage:(n,a)=>{n.signTransactionsCancelMessage=a.payload},updateSignedTransactionsCustomTransactionInformation:(n,a)=>{let{sessionId:s,customTransactionInformationOverrides:o}=a.payload;n.signedTransactions[s]!=null&&(n.signedTransactions[s].customTransactionInformation=i(i({},n.signedTransactions[s].customTransactionInformation),o))}},extraReducers:n=>{n.addCase(C,()=>S),n.addCase(w,(a,s)=>{var r;if(a.signTransactionsCancelMessage=null,!((r=s.payload)!=null&&r.transactions))return;let{signedTransactions:o,customTransactionInformationForSessionId:t}=s.payload.transactions,c=Object.entries(o).reduce((T,[d,l])=>{let u=new Date(d),g=new Date;return g.setHours(g.getHours()+5),g-u>0||(T[d]=l),T},{});t!=null&&(a.customTransactionInformationForSessionId=t),o!=null&&(a.signedTransactions=c)})}}),{updateSignedTransactionStatus:V,updateSignedTransactions:X,setTransactionsToSign:Z,clearAllTransactionsToSign:_,clearAllSignedTransactions:$,clearSignedTransaction:nn,clearTransactionToSign:sn,setSignTransactionsError:an,setSignTransactionsCancelMessage:on,moveTransactionsToSignedState:tn,updateSignedTransactionsCustomTransactionInformation:rn}=v.actions,en=v.reducer});export{v as a,V as b,X as c,Z as d,_ as e,$ as f,nn as g,sn as h,an as i,on as j,tn as k,rn as l,en as m,b as n};
//# sourceMappingURL=chunk-LRON2GMF.js.map
