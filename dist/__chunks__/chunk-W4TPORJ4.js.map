{
  "version": 3,
  "sources": ["../../src/models/newTransaction.ts"],
  "sourcesContent": ["import {\n  Address,\n  Transaction,\n  TransactionOptions,\n  TransactionVersion\n} from '@multiversx/sdk-core';\nimport { GAS_LIMIT, GAS_PRICE, VERSION } from 'constants/index';\nimport { RawTransactionType } from 'types';\nimport { getDataPayloadForTransaction } from 'utils/transactions/getDataPayloadForTransaction';\nimport { isGuardianTx } from 'utils/transactions/isGuardianTx';\n\nexport function newTransaction(rawTransaction: RawTransactionType) {\n  const rawTx = { ...rawTransaction };\n\n  // TODO: Remove when the protocol supports usernames for guardian transactions\n  if (isGuardianTx({ data: rawTx.data, onlySetGuardian: true })) {\n    delete rawTx.senderUsername;\n    delete rawTx.receiverUsername;\n  }\n\n  const transaction = new Transaction({\n    value: rawTx.value.valueOf(),\n    data: getDataPayloadForTransaction(rawTx.data),\n    nonce: rawTx.nonce.valueOf(),\n    receiver: new Address(rawTx.receiver),\n    ...(rawTx.receiverUsername\n      ? { receiverUsername: rawTx.receiverUsername }\n      : {}),\n    sender: new Address(rawTx.sender),\n    ...(rawTx.senderUsername ? { senderUsername: rawTx.senderUsername } : {}),\n    gasLimit: rawTx.gasLimit.valueOf() ?? GAS_LIMIT,\n    gasPrice: rawTx.gasPrice.valueOf() ?? GAS_PRICE,\n    chainID: rawTx.chainID.valueOf(),\n    version: new TransactionVersion(rawTx.version ?? VERSION),\n    ...(rawTx.options\n      ? { options: new TransactionOptions(rawTx.options) }\n      : {}),\n    ...(rawTx.guardian ? { guardian: new Address(rawTx.guardian) } : {})\n  });\n\n  if (rawTx.guardianSignature) {\n    transaction.applyGuardianSignature(\n      Buffer.from(rawTx.guardianSignature, 'hex')\n    );\n  }\n\n  if (rawTx.signature) {\n    transaction.applySignature(Buffer.from(rawTx.signature, 'hex'));\n  }\n\n  return transaction;\n}\n"],
  "mappings": "0NAAA,gHAWO,WAAwB,EAAoC,CAXnE,UAYE,GAAM,GAAQ,KAAK,GAGnB,AAAI,EAAa,CAAE,KAAM,EAAM,KAAM,gBAAiB,EAAK,CAAC,GAC1D,OAAO,GAAM,eACb,MAAO,GAAM,kBAGf,GAAM,GAAc,GAAI,GAAY,aAClC,MAAO,EAAM,MAAM,QAAQ,EAC3B,KAAM,EAA6B,EAAM,IAAI,EAC7C,MAAO,EAAM,MAAM,QAAQ,EAC3B,SAAU,GAAI,GAAQ,EAAM,QAAQ,GAChC,EAAM,iBACN,CAAE,iBAAkB,EAAM,gBAAiB,EAC3C,CAAC,GAP6B,CAQlC,OAAQ,GAAI,GAAQ,EAAM,MAAM,IAC5B,EAAM,eAAiB,CAAE,eAAgB,EAAM,cAAe,EAAI,CAAC,GATrC,CAUlC,SAAU,KAAM,SAAS,QAAQ,IAAvB,OAA4B,EACtC,SAAU,KAAM,SAAS,QAAQ,IAAvB,OAA4B,EACtC,QAAS,EAAM,QAAQ,QAAQ,EAC/B,QAAS,GAAI,GAAmB,KAAM,UAAN,OAAiB,CAAO,IACpD,EAAM,QACN,CAAE,QAAS,GAAI,GAAmB,EAAM,OAAO,CAAE,EACjD,CAAC,GACD,EAAM,SAAW,CAAE,SAAU,GAAI,GAAQ,EAAM,QAAQ,CAAE,EAAI,CAAC,EACnE,EAED,MAAI,GAAM,mBACR,EAAY,uBACV,SAAO,KAAK,EAAM,kBAAmB,KAAK,CAC5C,EAGE,EAAM,WACR,EAAY,eAAe,SAAO,KAAK,EAAM,UAAW,KAAK,CAAC,EAGzD,CACT,CAnDA,iBAMA,IAEA,IACA",
  "names": []
}
