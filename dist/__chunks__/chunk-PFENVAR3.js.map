{
  "version": 3,
  "sources": ["../../src/hooks/signMessage/verifyMessage.ts"],
  "sourcesContent": ["import { Address, Message, MessageComputer } from '@multiversx/sdk-core/out';\nimport { getVerifier } from './getVerifier';\n\nexport const verifyMessage = (signedMessage: string) => {\n  try {\n    const { message, address, signature } = JSON.parse(signedMessage);\n\n    const decodedMessage = Buffer.from(message.replace('0x', ''), 'hex');\n    const decodedSignature = Buffer.from(signature.replace('0x', ''), 'hex');\n\n    const verifier = getVerifier(address);\n\n    const messageComputer = new MessageComputer();\n\n    const msg = new Message({\n      address: new Address(address),\n      data: decodedMessage\n    });\n\n    const serializedMessage = messageComputer.computeBytesForVerifying(msg);\n\n    const isVerified = verifier.verify(serializedMessage, decodedSignature);\n\n    return {\n      isVerified,\n      message: decodedMessage.toString(),\n      address\n    };\n  } catch {\n    return {\n      isVerified: false,\n      message: '',\n      address: ''\n    };\n  }\n};\n"],
  "mappings": "uFAAA,yFAGO,GAAM,GAAgB,AAAC,GAA0B,CACtD,GAAI,CACF,GAAM,CAAE,UAAS,UAAS,aAAc,KAAK,MAAM,CAAa,EAE1D,EAAiB,SAAO,KAAK,EAAQ,QAAQ,KAAM,EAAE,EAAG,KAAK,EAC7D,EAAmB,SAAO,KAAK,EAAU,QAAQ,KAAM,EAAE,EAAG,KAAK,EAEjE,EAAW,EAAY,CAAO,EAE9B,EAAkB,GAAI,GAEtB,EAAM,GAAI,GAAQ,CACtB,QAAS,GAAI,GAAQ,CAAO,EAC5B,KAAM,CACR,CAAC,EAEK,EAAoB,EAAgB,yBAAyB,CAAG,EAItE,MAAO,CACL,WAHiB,EAAS,OAAO,EAAmB,CAAgB,EAIpE,QAAS,EAAe,SAAS,EACjC,SACF,CACF,OAAQ,EAAN,CACA,MAAO,CACL,WAAY,GACZ,QAAS,GACT,QAAS,EACX,CACF,CACF",
  "names": []
}
